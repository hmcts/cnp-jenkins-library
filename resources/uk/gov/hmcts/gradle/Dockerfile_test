FROM hmctspublic.azurecr.io/base/java:openjdk-11-debug-distroless-1.4

WORKDIR /opt/app
USER hmcts

COPY --chown=hmcts:hmcts . /opt/app/

RUN ["/busybox/sh", "gradlew", "--info", "--no-daemon", "testClasses", "smokeTestClasses", "functionalTestClasses"]

ENTRYPOINT ["sh", "runTests.sh"]
